<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.dreamlabs.gdthink.gdthink.dao.ProjectDAO">
   <select id="getHrNoticeList" resultType="TbNoticeVo">
	SELECT
		SUBSTR(NOTICE_ID, 3, LENGTH(NOTICE_ID)-2) AS NOTICE_ID,
		S_CODE_NM ,
		TITLE ,
		CONTENTS ,
		USER_ID ,
		REG_DT ,
		UP_DT ,
		TOP_YN ,
		SHOW_YN ,
		VIEWS ,
		REG_NM
	FROM
		TB_NOTICE
	WHERE
		NOTICE_ID LIKE 'HR%'
		AND SHOW_YN = 'Y'
	ORDER BY
		TO_NUMBER(NOTICE_ID) DESC
   </select>
   
   <insert id="insertHrProNotice">
	INSERT INTO TB_NOTICE 
	(
		NOTICE_ID,
		S_CODE_NM,
		TITLE,
		CONTENTS,
<!--		USER_ID,-->
		REG_DT,
		TOP_YN,
		SHOW_YN,
		VIEWS,
		REG_NM
	)
	VALUES 
	(
		#{noticeCd} || (SELECT NVL(MAX(TO_NUMBER(SUBSTR(NOTICE_ID, 3))) + 1, 1) NOTICE_ID FROM TB_NOTICE WHERE NOTICE_ID LIKE #{noticeCd} || '%' ),
		#{sCodeNm},
		#{title},
		#{contents},
<!--		#{userId},-->
		SYSDATE,
		'N',
		'Y',
		0,
		#{regNm}
	)
   </insert>
</mapper>